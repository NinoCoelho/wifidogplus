/**
 * Copyright(C) 2016. JARXI. All rights reserved.
 *
 * counterfeit.c
 * Original Author : chenjunpei@jarxi.com, 2016-9-11.
 *
 * Description
 */

#define _GNU_SOURCE

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <syslog.h>

#include "common.h"
#include "safe.h"
#include "debug.h"

static char counterfeit_phone_prefix[][4] = {
    "130", "131", "132", "133", "134", "135", "136", "137", "138", "139",
    /* "145", "147", // UIM */
    "150", "151", "152", "153", "154", "155", "156", "157", "158", "159",
    "170", "171", "173", "175", "176", "177", "178",
    "180", "181", "182", "183", "184", "185", "186", "187", "188", "189",
};
static int counterfeit_phone_prefix_array_size = (sizeof(counterfeit_phone_prefix) / sizeof(counterfeit_phone_prefix[0]));

static char counterfeit_phone_infix[][5] = {
    "0050",
    "0051",
    "0052",
    "0053",
    "0054",
    "0055",
    "0056",
    "0057",
    "0058",
    "0059",
    "0550",
    "0550",
    "0550",
    "0550",
    "0550",
    "0551",
    "0551",
    "0551",
    "0552",
    "0552",
    "0552",
    "0553",
    "0553",
    "0553",
    "0554",
    "0554",
    "0554",
    "0555",
    "0555",
    "0555",
    "0556",
    "0556",
    "0556",
    "0557",
    "0557",
    "0557",
    "0558",
    "0558",
    "0558",
    "0559",
    "0559",
    "0559",
    "0560",
    "0560",
    "0560",
    "0561",
    "0561",
    "0561",
    "0562",
    "0562",
    "0562",
    "0563",
    "0563",
    "0563",
    "0564",
    "0564",
    "0564",
    "0565",
    "0565",
    "0565",
    "0566",
    "0566",
    "0566",
    "0567",
    "0567",
    "0567",
    "0568",
    "0568",
    "0568",
    "0569",
    "0569",
    "0569",
    "0960",
    "1490",
    "1491",
    "1492",
    "1493",
    "1494",
    "1495",
    "1496",
    "1497",
    "1498",
    "1499",
    "1550",
    "1550",
    "1551",
    "1551",
    "1552",
    "1552",
    "1553",
    "1553",
    "1554",
    "1554",
    "1555",
    "1555",
    "1556",
    "1556",
    "1557",
    "1557",
    "1558",
    "1558",
    "1559",
    "1559",
    "1560",
    "1560",
    "1561",
    "1561",
    "1562",
    "1562",
    "1563",
    "1563",
    "1564",
    "1564",
    "1565",
    "1565",
    "1566",
    "1566",
    "1567",
    "1567",
    "1568",
    "1568",
    "1569",
    "1569",
    "1640",
    "1641",
    "1642",
    "1643",
    "1644",
    "1645",
    "1646",
    "1647",
    "1648",
    "1649",
    "2100",
    "2101",
    "2102",
    "2103",
    "2104",
    "2105",
    "2106",
    "2107",
    "2108",
    "2109",
    "2110",
    "2111",
    "2112",
    "2113",
    "2114",
    "2115",
    "2116",
    "2117",
    "2118",
    "2119",
    "2120",
    "2121",
    "2122",
    "2123",
    "2124",
    "2125",
    "2126",
    "2127",
    "2128",
    "2129",
    "2550",
    "2551",
    "2552",
    "2553",
    "2554",
    "2555",
    "2556",
    "2557",
    "2558",
    "2559",
    "2560",
    "2561",
    "2562",
    "2563",
    "2564",
    "2565",
    "2566",
    "2567",
    "2568",
    "2569",
    "3180",
    "3181",
    "3182",
    "3183",
    "3184",
    "3185",
    "3186",
    "3187",
    "3188",
    "3189",
    "3190",
    "3191",
    "3192",
    "3193",
    "3194",
    "3195",
    "3196",
    "3197",
    "3198",
    "3199",
    "3300",
    "3301",
    "3302",
    "3303",
    "3304",
    "3305",
    "3306",
    "3307",
    "3308",
    "3309",
    "3550",
    "3551",
    "3552",
    "3553",
    "3554",
    "3555",
    "3556",
    "3557",
    "3558",
    "3559",
    "3560",
    "3561",
    "3562",
    "3563",
    "3564",
    "3565",
    "3566",
    "3567",
    "3568",
    "3569",
    "3700",
    "3701",
    "3702",
    "3703",
    "3704",
    "3705",
    "3706",
    "3707",
    "3708",
    "3709",
    "3710",
    "3711",
    "3712",
    "3713",
    "3714",
    "3715",
    "3716",
    "3717",
    "3718",
    "3719",
    "3720",
    "3721",
    "3722",
    "3723",
    "3724",
    "3725",
    "3726",
    "3727",
    "3728",
    "3729",
    "3920",
    "3921",
    "3922",
    "3923",
    "3924",
    "3925",
    "3926",
    "4065",
    "4066",
    "4266",
    "4550",
    "4551",
    "4552",
    "4553",
    "4554",
    "4555",
    "4556",
    "4557",
    "4558",
    "4559",
    "4560",
    "4561",
    "4562",
    "4563",
    "4564",
    "4565",
    "4566",
    "4567",
    "4568",
    "4569",
    "5500",
    "5501",
    "5502",
    "5503",
    "5504",
    "5505",
    "5506",
    "5507",
    "5508",
    "5509",
    "5550",
    "5551",
    "5552",
    "5553",
    "5554",
    "5555",
    "5556",
    "5557",
    "5558",
    "5559",
    "5560",
    "5561",
    "5562",
    "5563",
    "5564",
    "5565",
    "5566",
    "5567",
    "5568",
    "5569",
    "6550",
    "6550",
    "6551",
    "6552",
    "6553",
    "6554",
    "6555",
    "6556",
    "6557",
    "6558",
    "6559",
    "6560",
    "6561",
    "6562",
    "6563",
    "6564",
    "6565",
    "6566",
    "6567",
    "6568",
    "6569",
    "7070",
    "7070",
    "7071",
    "7072",
    "7073",
    "7074",
    "7075",
    "7076",
    "7077",
    "7078",
    "7079",
    "7080",
    "7081",
    "7082",
    "7083",
    "7084",
    "7085",
    "7086",
    "7087",
    "7088",
    "7089",
    "7090",
    "7091",
    "7092",
    "7093",
    "7094",
    "7095",
    "7096",
    "7097",
    "7098",
    "7099",
    "7550",
    "7550",
    "7551",
    "7552",
    "7553",
    "7554",
    "7555",
    "7556",
    "7557",
    "7558",
    "7559",
    "7560",
    "7561",
    "7562",
    "7563",
    "7564",
    "7565",
    "7566",
    "7567",
    "7568",
    "7569",
    "8130",
    "8210",
    "8220",
    "8221",
    "8222",
    "8223",
    "8224",
    "8225",
    "8226",
    "8227",
    "8228",
    "8229",
    "8550",
    "8550",
    "8550",
    "8551",
    "8551",
    "8552",
    "8552",
    "8553",
    "8553",
    "8554",
    "8554",
    "8555",
    "8555",
    "8556",
    "8556",
    "8557",
    "8557",
    "8558",
    "8558",
    "8559",
    "8559",
    "8560",
    "8560",
    "8561",
    "8561",
    "8562",
    "8562",
    "8563",
    "8563",
    "8564",
    "8564",
    "8565",
    "8565",
    "8566",
    "8566",
    "8567",
    "8567",
    "8568",
    "8568",
    "8569",
    "8569",
    "8570",
    "8571",
    "8572",
    "8573",
    "8574",
    "8575",
    "8575",
    "8576",
    "8576",
    "8577",
    "8577",
    "8578",
    "8579",
    "8580",
    "8581",
    "8582",
    "8583",
    "8584",
    "8585",
    "8586",
    "8587",
    "8588",
    "8589",
    "8590",
    "8591",
    "8591",
    "8592",
    "8593",
    "8594",
    "8595",
    "8596",
    "8597",
    "8598",
    "8599",
    "9550",
    "9550",
    "9551",
    "9552",
    "9553",
    "9554",
    "9555",
    "9556",
    "9557",
    "9558",
    "9559",
    "9560",
    "9561",
    "9562",
    "9563",
    "9564",
    "9565",
    "9566",
    "9567",
    "9568",
    "9569",
    "9650",
    "9651",
    "9652",
    "9653",
    "9654",
    "9655",
    "9656",
    "9657",
    "9658",
    "9659",
    "9660",
    "9661",
    "9662",
    "9663",
    "9664",
    "9665",
    "9666",
    "9667",
    "9668",
    "9669",
    "9670",
    "9671",
    "9672",
    "9673",
    "9674",
    "9675",
    "9676",
    "9677",
    "9678",
    "9679",
};
static int counterfeit_phone_infix_array_size = (sizeof(counterfeit_phone_infix) / sizeof(counterfeit_phone_infix[0]));

int counterfeit_phone_num(char *buf)
{
    int rand_prefix = 0;
    int rand_infix = 0;
    int rand_suffix = 0;

    if (!buf) {
        return -1;
    }

    rand_prefix = rand() % counterfeit_phone_prefix_array_size;
    rand_infix = rand() % counterfeit_phone_infix_array_size;
    rand_suffix = rand() % 9000 + 1000;

    memset(buf, 0, PHONE_NUMBER_LEN);
    sprintf(buf, "%s%s%d", counterfeit_phone_prefix[rand_prefix], counterfeit_phone_infix[rand_infix], rand_suffix);
    debug(LOG_DEBUG, "counterfeit phone number %s", buf);

    return 0;
}

